# Анализатор опционов Московской биржи

Микро-проект для анализа опционов на Московской бирже с поиском опционов, торгующихся с дисконтом к теоретической цене.

## Установка

1. Установите Python 3.7+
2. Установите зависимости:
```bash
pip install -r requirements.txt
```

## Использование

### Режим сохранения таблицы (--table)
Сохраняет результаты анализа в Excel файл:
```bash
python options_analyzer.py --table
```

Файл будет сохранен в директорию `output/tables/` с временной меткой.

### Режим мониторинга (--monitoring)
Запускает периодический мониторинг опционов (обновление каждые 15 минут):
```bash
python options_analyzer.py --monitoring
```

Результаты сохраняются в директорию `output/monitoring/`.

## Особенности

- Автоматическая фильтрация дат экспирации (до 2026-06-01)
- Поиск опционов с ненулевым оффером
- Расчет дисконта к теоретической цене
- Сортировка по величине дисконта
- Обработка ошибок и статусов HTTP
- Индикация прогресса с помощью tqdm
- Поддержка многопоточности через асинхронные запросы

## Структура выходных данных

Результирующая таблица содержит:
- TICKER - тикер базового актива
- OPTION_TYPE - тип опциона (CALL/PUT)
- EXP_DATE - дата экспирации
- SECID - идентификатор опциона
- STRIKE - страйк цена
- THEORPRICE - теоретическая цена
- OFFER - текущий оффер
- DISCOUNT - разница (THEORPRICE - OFFER)
- DISCOUNT_PCT - дисконт в процентах

## Конфигурация

Основные параметры находятся в верхней части файла `options_analyzer.py`:
- TICKERS - список анализируемых тикеров
- MAX_DATE - максимальная дата экспирации
- PERIOD - период обновления в минутах (для мониторинга)
- TOP - количество опционов в топе
- WAIT - задержка между запросами в секундах